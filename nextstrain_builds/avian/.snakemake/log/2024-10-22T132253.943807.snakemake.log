Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Job stats:
job                  count
-----------------  -------
align                    2
all                      1
ancestral                2
export                   2
export_w_outgroup        2
filter                   2
include_outgroup         2
parse                    2
prune_outgroup           2
refine                   2
translate                2
tree                     2
total                   23

Select jobs to execute...

[Tue Oct 22 13:22:54 2024]
rule include_outgroup:
    input: data/H3_ncbi_sequences.fasta
    output: results/H3/sequences_w_outgroup.fasta, config/H3/include_strains.txt
    jobid: 21
    reason: Missing output files: results/H3/sequences_w_outgroup.fasta
    wildcards: ha_type=H3
    resources: tmpdir=/var/folders/g_/6938g_6s199gxxswt2nf7w500000gn/T


[Tue Oct 22 13:22:54 2024]
rule include_outgroup:
    input: data/H1_ncbi_sequences.fasta
    output: results/H1/sequences_w_outgroup.fasta, config/H1/include_strains.txt
    jobid: 8
    reason: Missing output files: results/H1/sequences_w_outgroup.fasta
    wildcards: ha_type=H1
    resources: tmpdir=/var/folders/g_/6938g_6s199gxxswt2nf7w500000gn/T

[Tue Oct 22 13:22:55 2024]
Finished job 8.
1 of 23 steps (4%) done
Select jobs to execute...

[Tue Oct 22 13:22:55 2024]
Job 7: Parsing fasta into sequences and metadata
Reason: Missing output files: results/H1/sequences.fasta, results/H1/metadata.tsv; Input files updated by another job: results/H1/sequences_w_outgroup.fasta

[Tue Oct 22 13:22:56 2024]
Finished job 21.
2 of 23 steps (9%) done
Select jobs to execute...

[Tue Oct 22 13:22:56 2024]
Job 20: Parsing fasta into sequences and metadata
Reason: Missing output files: results/H3/sequences.fasta, results/H3/metadata.tsv; Input files updated by another job: results/H3/sequences_w_outgroup.fasta

[Tue Oct 22 13:22:57 2024]
Finished job 7.
3 of 23 steps (13%) done
Select jobs to execute...

[Tue Oct 22 13:22:57 2024]
Job 6: 
        Filtering to
          - 50 sequence(s) per year
          - excluding strains in config/dropped_strains_ha.txt
          - only HA sequences
          - excluding strains prior to 1950
        
Reason: Missing output files: results/H1/filtered.fasta; Input files updated by another job: config/H1/include_strains.txt, results/H1/metadata.tsv, results/H1/sequences.fasta

[Tue Oct 22 13:22:58 2024]
Finished job 20.
4 of 23 steps (17%) done
Select jobs to execute...

[Tue Oct 22 13:22:58 2024]
Job 19: 
        Filtering to
          - 50 sequence(s) per year
          - excluding strains in config/dropped_strains_ha.txt
          - only HA sequences
          - excluding strains prior to 1950
        
Reason: Missing output files: results/H3/filtered.fasta; Input files updated by another job: results/H3/sequences.fasta, results/H3/metadata.tsv, config/H3/include_strains.txt

[Tue Oct 22 13:22:59 2024]
Finished job 6.
5 of 23 steps (22%) done
Select jobs to execute...

[Tue Oct 22 13:22:59 2024]
Job 5: 
        Aligning sequences to config/H1/reference_H1.gb
          - filling gaps with N
        
Reason: Missing output files: results/H1/aligned.fasta; Input files updated by another job: results/H1/filtered.fasta

[Tue Oct 22 13:23:02 2024]
Finished job 19.
6 of 23 steps (26%) done
Select jobs to execute...

[Tue Oct 22 13:23:02 2024]
Job 18: 
        Aligning sequences to config/H3/reference_H3.gb
          - filling gaps with N
        
Reason: Missing output files: results/H3/aligned.fasta; Input files updated by another job: results/H3/filtered.fasta

[Tue Oct 22 13:23:42 2024]
Finished job 5.
7 of 23 steps (30%) done
Select jobs to execute...

[Tue Oct 22 13:23:42 2024]
Job 4: Building tree
Reason: Missing output files: results/H1/tree-raw.nwk; Input files updated by another job: results/H1/aligned.fasta

[Tue Oct 22 13:24:12 2024]
Finished job 18.
8 of 23 steps (35%) done
Select jobs to execute...

[Tue Oct 22 13:24:12 2024]
Job 17: Building tree
Reason: Missing output files: results/H3/tree-raw.nwk; Input files updated by another job: results/H3/aligned.fasta

[Tue Oct 22 13:24:20 2024]
Finished job 4.
9 of 23 steps (39%) done
Select jobs to execute...

[Tue Oct 22 13:24:20 2024]
Job 3: 
        Refining tree
          - estimate timetree
          - use const coalescent timescale
          - estimate marginal node dates
        
Reason: Missing output files: results/H1/tree.nwk, results/H1/branch-lengths.json; Input files updated by another job: results/H1/tree-raw.nwk, results/H1/metadata.tsv, results/H1/aligned.fasta

[Tue Oct 22 13:25:29 2024]
Finished job 17.
10 of 23 steps (43%) done
Select jobs to execute...

[Tue Oct 22 13:25:29 2024]
Job 16: 
        Refining tree
          - estimate timetree
          - use const coalescent timescale
          - estimate marginal node dates
        
Reason: Missing output files: results/H3/tree.nwk, results/H3/branch-lengths.json; Input files updated by another job: results/H3/tree-raw.nwk, results/H3/aligned.fasta, results/H3/metadata.tsv

[Tue Oct 22 13:30:18 2024]
Finished job 3.
11 of 23 steps (48%) done
Select jobs to execute...

[Tue Oct 22 13:30:18 2024]
Job 11: Exporting data files for for auspice
Reason: Missing output files: auspice/H1_w_outgroup.json; Input files updated by another job: results/H1/tree.nwk, results/H1/metadata.tsv, results/H1/branch-lengths.json

[Tue Oct 22 13:30:20 2024]
Error in rule export_w_outgroup:
    jobid: 11
    input: results/H1/tree.nwk, results/H1/metadata.tsv, results/H1/branch-lengths.json, config/colors.tsv, config/lat_longs.tsv, config/auspice_config_ha.json
    output: auspice/H1_w_outgroup.json
    shell:
        
        augur export v2             --tree results/H1/tree.nwk             --metadata results/H1/metadata.tsv             --node-data results/H1/branch-lengths.json             --colors config/colors.tsv             --lat-longs config/lat_longs.tsv             --auspice-config config/auspice_config_ha.json             --output auspice/H1_w_outgroup.json
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Tue Oct 22 13:34:08 2024]
Finished job 16.
12 of 23 steps (52%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-10-22T132253.943807.snakemake.log
